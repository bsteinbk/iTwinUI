// Copyright (c) Bentley Systems, Incorporated. All rights reserved.
// See LICENSE.md in the project root for license terms and full copyright notice.
@import '../style/index';
@import '../icon/index';

$thumb-height: $iui-m;  // 16px
$track-height: $iui-xs;  // 4px
$tick-height: $iui-baseline; // 11px

@mixin iui-slider-component-container {
  display: flex;

  .iui-slider-min,
  .iui-slider-max {
    @include iui-font-family;
    user-select: all;
    margin-top: $iui-xxs;

    .iui-icon {
      @include iui-icons-default;
      margin-top: 4px;
    }
  }

  .iui-slider-min {
    margin-right: $iui-s;
    text-align: right;
  }

  .iui-slider-max {
    margin-left: $iui-s;
  }

  &.iui-disabled {
    @include iui-slider-disabled;
  }
}

@mixin iui-slider-container {
  position: relative;
  z-index: 1; // above ticks
  pointer-events: none;
  flex-grow: 1;

  .iui-tooltip {
    display: none;
  }

  .iui-track {
    pointer-events: none;  // let pointer event through to underlying range control
    position: absolute;
    width: 100%;
    height: $track-height;
    margin-top: 12px;
    @include themed {
      background-color: t(iui-color-background-4);
    }
  }

  .iui-slider-thumb {
    outline: none;
    position: absolute;
    pointer-events: all;
    height: $thumb-height;
    width: $thumb-height;
    border-radius: 100%;
    transform: translate((-$thumb-height - 2) * 0.5, $track-height + 1); // 2 and 1 to adjust for border width
    z-index: 2;
    transition: border $iui-speed-fast ease;
    @include themed {
      background: t(iui-color-background-1);
      border: 1px solid t(iui-color-background-5);
    }

    &:focus + .iui-tooltip,
    &:hover + .iui-tooltip,
    .iui-active + .iui-tooltip {
      position: absolute;
      display: block;
      margin-top: -$iui-xl;
      transform: translateX(-50%);
    }
  }

  .iui-slider-progress {
    pointer-events: none;
    position: absolute;
    height: $track-height;
    left: 0;
    top: $iui-sm;
    z-index: 1;
    @include themed {
      background-color: t(iui-color-foreground-primary);
    }
  }

  .iui-slider-range {
    position: absolute;
    height: $track-height;
    z-index: 1;
    bottom: 0;
    top: $iui-sm;
    pointer-events: none;
    @include themed {
      background-color: t(iui-color-foreground-primary);
    }
  }

  //Focus for slider
  &:not(.iui-range-slider) .iui-slider:focus-visible {
    outline: none;

    + .iui-slider-thumb {
      @include themed {
        box-shadow: t(iui-focus-box-shadow);
      };
    }
  }

  //Focus for range
  &.iui-range-slider .iui-slider {
    &:focus-visible {
      outline: none;
    }
  }

  //Focus for thumb
  .iui-slider-thumb {
    @include iui-focus();
  }

  // Theme
  &.iui-positive {
    .iui-slider-progress,
    .iui-slider-range {
      @include themed {
        background-color: t(iui-color-foreground-positive);
      }
    }

    //Focus for slider
    &:not(.iui-range-slider) .iui-slider:focus-visible + .iui-slider-thumb {
      @include themed {
        box-shadow: t(iui-focus-positive-box-shadow);
      }
    }

    //Focus for thumb
    .iui-slider-thumb {
      @include iui-focus(iui-focus-positive-box-shadow);
    }
  }
}

@mixin iui-slider-ticks {
  position: relative;
  padding-top: 16px;
  display: flex;
  pointer-events: none;
  justify-content: space-between;
  user-select: none;

  .iui-slider-tick {
    position: relative;
    display: flex;
    pointer-events: none;
    justify-content: center;
    width: 1px;
    height: $tick-height;
    line-height: $tick-height * 4.25;
    margin-bottom: $tick-height * 2;
    @include themed {
      background-color: t(iui-color-background-4);
    }
  }
}

@mixin iui-slider-disabled {
  .iui-slider-thumb {
    @include themed {
      background-color: t(iui-color-background-4);
      border-color: t(iui-color-background-4);
    }
  }

  .iui-slider-progress,
  .iui-slider-range,
  .iui-positive .iui-slider-progress,
  .iui-positive .iui-slider-range {
    @include themed {
      background-color: rgba(t(iui-color-foreground-body-rgb), t(iui-opacity-4));
    }
  }

  .iui-slider-min,
  .iui-slider-max,
  .iui-slider-tick {
    user-select: none;
    @include themed {
      color: t(iui-text-color-muted);
    }
  }
}
